<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../static/style.css" />
    <title></title>
    <style>
      .KommenatarBox {
        width: 60%;
        margin-left: auto;
        margin-right: auto;
      }
      .Kommenatar {
        margin: 50px;
        border-style: solid;
      }
    </style>
  </head>
  <script>
    function getFavorite() {
      var fav = getCookie("CarbonaraFav");
      console.log(fav);
      document.querySelector(".favorite").checked = fav;
    }
    function favorite() {
      var fav = document.querySelector(".favorite").checked;
      if (fav == true) {
        setCookie("CarbonaraFav", true, 4);
      } else {
        setCookie("CarbonaraFav", false, 4);
      }
    }
    function getCookie(cname) {
      var name = cname + "=";
      var decodedCookie = decodeURIComponent(document.cookie);
      var ca = decodedCookie.split(";");
      for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == " ") {
          c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }
      return "";
    }

    function setCookie(cname, cvalue, exdays) {
      var d = new Date();
      d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);
      var expires = "expires=" + d.toUTCString();
      document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
    }

    document.onload = setFavorite();
  </script>
  <body>
    <input
      class="favorite"
      onchange="favorite()"
      type="checkbox"
      id="favorite"
      method="POST"
    />
    <div class="wrapper">
      <h1>Spaghetti Carbonara</h1>
      <h3>Klassiker aus 5 Zutaten</h3>
      <div class="rezeptbox">
        <div class="rezept">
          <table>
            <tr>
              <th>150g</th>
              <th>Spagetti</th>
            </tr>
            <tr>
              <th>2</th>
              <th>Eier</th>
            </tr>
            <tr>
              <th>100g</th>
              <th>Parmesan</th>
            </tr>
            <tr>
              <th>etwas</th>
              <th>Pfeffer</th>
            </tr>
            <tr>
              <th>50g</th>
              <th>fetter Schinken</th>
            </tr>
          </table>
        </div>
      </div>
      <div class="caboBild">
        <img
          class="Carbonara"
          alt="Qries"
          src="../img/Carbonara.jpg"
          width="500px"
          height="328px"
        />
      </div>
      <div class="Arbeit">
        <h3>Vorbereitung</h3>
        Die Vorbereitung ist das A und O bei diesem Rezept, da es sonst gegen
        Ende hektisch wird. Der erste schritt ist erwartungsgemäß ein großen
        Topf Wasser zum Kochen zu bringen. Währenddessen kann der Schinken in
        ca. 0,5cm große Würfel geschnitten und anschließend in einer großen
        Pfanne auf mittlerer Hitze ausgelassen. Für die cremige Soße wird der
        Parmesan, oder optional jeder andere Hartkäse, gerieben, vielleicht
        einen kleinen Teil zur Seite legen um des am ende über das Fertige essen
        zu Streuen. Zu dem Käse kommen und ein ganzes Ei und ein Eigelb und
        Pfeffer, kein Salz der Käse ist Salzig! Wenn man getrocknete Nudeln
        gekauft hat kann man noch einen kleine Teelöffel Speisestärke
        hinzugeben, diese fehlt denn Nudeln oft und sie wird für die Emulsion
        benötigt.
      </div>
      <div class="Arbeit">
        <h3>Zubereitung</h3>
        Wenn die Nudeln gekocht sind sowie der Schinken ausgelassen und braun
        ist, kann es losgehen. Fast alles an Wasser von denn Nudeln abgießen und
        dann zu dem Speck in die Pfanne damit, deswegen die große Pfanne. Jetzt
        wird es kritisch! Die Eiermischung darf nicht wärmer als ca. 70°C werden
        sind wird sie körnig aber sie muss warm genug sein damit sich die
        Emulsion formen kann. Die Technik die für mich funktioniert ist zu
        warten bis die Schinken Nudeln grade so kochen (erkennt man mit dem
        Wasser in der Pfanne ganz gut) und sie dann sofort von der Hitze zu
        nehmen und das Ei hinein zu kippen. Jetzt muss gerührt werden wie
        besessener. Zum Schluss auf einen Teller und denn vorher geretteten
        Parmesan oben drauf. Wenn es funktioniert hat ist es eine wundervoll
        cremige und leckere Soße, ansonsten schmeckt es auch sehr gut und du
        kannst nächstes mal was besser machen.
        <br />
        <br />
        … Moment mal wo ist die Sahne? Das ist ein Carbonara Rezept und nicht
        für Schinken Sahnesoße…
      </div>
      <div id="commentBox">
        <h3 id="commentsHeader">Kommentare</h3>
        <form action="/comment" method="post">
          <label for="commentText">Kommentar schreiben</label>
          <input
            type="text"
            name="commentText"
            id="commentText"
            placeholder="Kommentartext"
          />
          <input type="hidden" name="recipePage" value="spaghetti" />
          <input type="submit" value="Absenden" />
        </form>
      </div>
    </div>

    <script>
      // fetch all comments
      const commentarea = document.getElementById("commentBox");
      fetch("https://b8jno.sse.codesandbox.io/comment")
        .then((response) => response.json())
        .then((commentsData) => {
          document.getElementById("commentsHeader").innerHTML +=
            " (" + commentsData.length + ")";
          commentsData.forEach((comm) => {
            const commwrapper = document.createElement("div");
            commwrapper.classList.add("comment");
            const userheading = document.createElement("h4");
            userheading.innerHTML = "User: " + comm.author;
            const commenttext = document.createElement("div");
            commenttext.innerHTML = "Comment: " + comm.commentText;
            commwrapper.appendChild(userheading).appendChild(commenttext);
            commentarea.appendChild(commwrapper);
          });
        });
    </script>
  </body>
</html>
